<!DOCTYPE html>
<html>
<head>
    <title>Focus Manager with useRef</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef } = React;
        
        // Focus manager component
        function FocusManager() {
            const [name, setName] = useState('');
            const [email, setEmail] = useState('');
            const [message, setMessage] = useState('');
            
            // DOM references
            const nameRef = useRef(null);
            const emailRef = useRef(null);
            const messageRef = useRef(null);
            
            // Persistent values (don't trigger re-renders)
            const renderCount = useRef(0);
            const previousName = useRef('');
            
            // Update render count on every render
            renderCount.current++;
            
            // Store previous name value
            if (name !== previousName.current) {
                previousName.current = name;
            }
            
            // Focus functions
            const focusName = () => {
                nameRef.current.focus();
            };
            
            const focusEmail = () => {
                emailRef.current.focus();
            };
            
            const focusMessage = () => {
                messageRef.current.focus();
            };
            
            const focusNext = () => {
                if (nameRef.current.value === '') {
                    nameRef.current.focus();
                } else if (emailRef.current.value === '') {
                    emailRef.current.focus();
                } else {
                    messageRef.current.focus();
                }
            };
            
            return (
                <div style={{ padding: '20px', fontFamily: 'Arial' }}>
                    <h2>Focus Manager</h2>
                    
                    <div style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#f0f0f0' }}>
                        <p>Render Count: {renderCount.current}</p>
                        <p>Previous Name: {previousName.current}</p>
                    </div>
                    
                    <div style={{ marginBottom: '20px' }}>
                        <button onClick={focusName}>Focus Name</button>
                        <button onClick={focusEmail}>Focus Email</button>
                        <button onClick={focusMessage}>Focus Message</button>
                        <button onClick={focusNext}>Focus Next Empty</button>
                    </div>
                    
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                        <input
                            ref={nameRef}
                            type="text"
                            placeholder="Name"
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            style={{ padding: '8px', fontSize: '16px' }}
                        />
                        
                        <input
                            ref={emailRef}
                            type="email"
                            placeholder="Email"
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            style={{ padding: '8px', fontSize: '16px' }}
                        />
                        
                        <textarea
                            ref={messageRef}
                            placeholder="Message"
                            value={message}
                            onChange={(e) => setMessage(e.target.value)}
                            style={{ padding: '8px', fontSize: '16px', height: '100px' }}
                        />
                    </div>
                </div>
            );
        }
        
        ReactDOM.render(<FocusManager />, document.getElementById('root'));
    </script>
</body>
</html>